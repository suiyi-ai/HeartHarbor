{"version":3,"file":"supabase.js","sources":["utils/supabase.js"],"sourcesContent":["// Supabase客户端配置\r\nconst SUPABASE_CONFIG = {\r\n  url: 'https://etvdmnsernfiegfeadad.supabase.co',\r\n  anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0dmRtbnNlcm5maWVnZmVhZGFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NzM1MDUsImV4cCI6MjA3NzQ0OTUwNX0.FNvK-NrAxGrY5TwYblFC__hScR9lxjC5VFEUPlMYtTY'\r\n}\r\n\r\n// UUID v4生成函数（符合Supabase标准）\r\nfunction generateUUID() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    const r = Math.random() * 16 | 0\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8)\r\n    return v.toString(16)\r\n  })\r\n}\r\n\r\n// UUID验证函数\r\nfunction isValidUUID(uuid) {\r\n  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i\r\n  return uuidRegex.test(uuid)\r\n}\r\n\r\n// 用户ID转换函数（处理旧格式ID）\r\nfunction convertLegacyUserId(legacyId) {\r\n  if (isValidUUID(legacyId)) {\r\n    return legacyId // 已经是有效UUID\r\n  }\r\n  \r\n  // 将旧格式ID转换为UUID格式\r\n  const hash = legacyId.split('').reduce((a, b) => {\r\n    a = ((a << 5) - a) + b.charCodeAt(0)\r\n    return a & a\r\n  }, 0)\r\n  \r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    const r = (hash + Math.random() * 16) % 16 | 0\r\n    const v = c === 'x' ? r : (r & 0x3 | 0x8)\r\n    return v.toString(16)\r\n  })\r\n}\r\n\r\n// 生成用户ID（修复版本，使用UUID格式）\r\nfunction getUserId() {\r\n  let userId = uni.getStorageSync('user_id')\r\n  \r\n  if (!userId) {\r\n    // 生成新的UUID\r\n    userId = generateUUID()\r\n    uni.setStorageSync('user_id', userId)\r\n    console.log('生成新用户ID（UUID格式）:', userId)\r\n  } else if (!isValidUUID(userId)) {\r\n    // 转换旧格式ID为UUID\r\n    const newUserId = convertLegacyUserId(userId)\r\n    console.log('转换旧用户ID格式:', userId, '->', newUserId)\r\n    userId = newUserId\r\n    uni.setStorageSync('user_id', userId)\r\n  }\r\n  \r\n  return userId\r\n}\r\n\r\n// 增强的Supabase查询构建函数（修复HTTP 400错误）\r\nfunction buildSupabaseQuery(params) {\r\n  const parts = []\r\n  \r\n  Object.keys(params).forEach(key => {\r\n    const value = params[key]\r\n    if (value !== null && value !== undefined) {\r\n      // 特殊处理Supabase查询参数\r\n      if (key === 'select') {\r\n        parts.push(`select=${encodeURIComponent(value)}`)\r\n      } else if (key === 'order') {\r\n        parts.push(`order=${encodeURIComponent(value)}`)\r\n      } else {\r\n        // 标准查询参数\r\n        parts.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`)\r\n      }\r\n    }\r\n  })\r\n  \r\n  return parts.join('&')\r\n}\r\n\r\n// 增强的错误处理函数（特别处理UUID错误）\r\nfunction handleSupabaseError(response, url, options) {\r\n  let errorMessage = `API Error: ${response.statusCode}`\r\n  \r\n  if (response.data) {\r\n    if (response.data.message) {\r\n      errorMessage += ` - ${response.data.message}`\r\n      \r\n      // 特别处理UUID格式错误\r\n      if (response.data.message.includes('invalid input syntax for type uuid')) {\r\n        errorMessage += ' (用户ID格式错误，已自动修复)'\r\n        \r\n        // 强制重新生成用户ID\r\n        const oldUserId = uni.getStorageSync('user_id')\r\n        const newUserId = generateUUID()\r\n        uni.setStorageSync('user_id', newUserId)\r\n        \r\n        console.warn('检测到UUID格式错误，已重新生成用户ID:', {\r\n          oldUserId: oldUserId,\r\n          newUserId: newUserId\r\n        })\r\n      }\r\n    }\r\n    if (response.data.hint) {\r\n      errorMessage += ` (${response.data.hint})`\r\n    }\r\n    if (response.data.details) {\r\n      errorMessage += ` [${response.data.details}]`\r\n    }\r\n  }\r\n\r\n  console.error('Supabase API错误详情:', {\r\n    url: url,\r\n    method: options.method,\r\n    statusCode: response.statusCode,\r\n    error: errorMessage,\r\n    responseData: response.data\r\n  })\r\n\r\n  return new Error(errorMessage)\r\n}\r\n\r\n// 数据库迁移函数（处理现有数据）\r\nasync function migrateUserData() {\r\n  const oldUserId = uni.getStorageSync('user_id_legacy')\r\n  const currentUserId = uni.getStorageSync('user_id')\r\n  \r\n  if (!oldUserId && currentUserId && !isValidUUID(currentUserId)) {\r\n    // 保存旧ID用于迁移\r\n    uni.setStorageSync('user_id_legacy', currentUserId)\r\n    \r\n    // 生成新UUID\r\n    const newUserId = generateUUID()\r\n    uni.setStorageSync('user_id', newUserId)\r\n    \r\n    console.log('执行用户数据迁移:', {\r\n      oldUserId: currentUserId,\r\n      newUserId: newUserId\r\n    })\r\n    \r\n    return newUserId\r\n  }\r\n  \r\n  return currentUserId\r\n}\r\n\r\n// MCP增强的Supabase API调用封装\r\nclass SupabaseService {\r\n  constructor() {\r\n    this.userId = getUserId()\r\n    this.isConnected = false\r\n    this.initConnection()\r\n  }\r\n\r\n  // 初始化连接（增强版本）\r\n  async initConnection() {\r\n    try {\r\n      // 执行数据迁移\r\n      await migrateUserData()\r\n      \r\n      // 验证当前用户ID格式\r\n      if (!isValidUUID(this.userId)) {\r\n        console.warn('用户ID格式无效，重新生成:', this.userId)\r\n        this.userId = generateUUID()\r\n        uni.setStorageSync('user_id', this.userId)\r\n      }\r\n      \r\n      await this.testConnection()\r\n      this.isConnected = true\r\n      console.log('Supabase MCP连接成功，用户ID:', this.userId)\r\n    } catch (error) {\r\n      console.warn('Supabase MCP连接失败，将使用降级方案:', error)\r\n      this.isConnected = false\r\n    }\r\n  }\r\n\r\n  // 测试连接\r\n  async testConnection() {\r\n    const testResult = await this.callApi('conversations', {\r\n      method: 'GET',\r\n      queryParams: {\r\n        limit: 1\r\n      }\r\n    })\r\n    return testResult\r\n  }\r\n\r\n  // 增强的API调用方法（修复HTTP 400错误）\r\n  async callApi(endpoint, options = {}) {\r\n    // 如果连接失败，直接返回空数据\r\n    if (!this.isConnected) {\r\n      console.warn('Supabase连接不可用，返回空数据')\r\n      return options.method === 'GET' ? [] : null\r\n    }\r\n\r\n    let url = `${SUPABASE_CONFIG.url}/rest/v1/${endpoint}`\r\n    \r\n    const defaultOptions = {\r\n      method: 'GET',\r\n      header: {\r\n        'apikey': SUPABASE_CONFIG.anonKey,\r\n        'Authorization': `Bearer ${SUPABASE_CONFIG.anonKey}`,\r\n        'Content-Type': 'application/json',\r\n        'Prefer': 'return=representation'\r\n      },\r\n      timeout: 15000\r\n    }\r\n\r\n    // 修复查询参数处理（使用增强的查询构建函数）\r\n    if (options.method === 'GET' && options.queryParams) {\r\n      const queryString = buildSupabaseQuery(options.queryParams)\r\n      if (queryString) {\r\n        url += '?' + queryString\r\n      }\r\n    }\r\n\r\n    // 合并选项\r\n    const finalOptions = {\r\n      ...defaultOptions,\r\n      ...options,\r\n      url: url,\r\n      header: {\r\n        ...defaultOptions.header,\r\n        ...(options.header || {})\r\n      }\r\n    }\r\n\r\n    // 处理请求体数据\r\n    if ((options.method === 'POST' || options.method === 'PATCH') && options.data) {\r\n      finalOptions.data = JSON.stringify(options.data)\r\n    }\r\n\r\n    // 添加调试信息\r\n    console.log(`MCP API调用: ${finalOptions.method} ${url}`)\r\n    console.log('查询参数:', options.queryParams)\r\n\r\n    try {\r\n      const response = await uni.request(finalOptions)\r\n\r\n      console.log('API响应状态码:', response.statusCode)\r\n      console.log('API响应数据:', response.data)\r\n\r\n      if (response.statusCode >= 200 && response.statusCode < 300) {\r\n        return response.data\r\n      } else {\r\n        throw handleSupabaseError(response, url, options)\r\n      }\r\n    } catch (error) {\r\n      console.error('Supabase API调用失败:', error)\r\n      console.error('请求详情:', {\r\n        url: url,\r\n        method: finalOptions.method,\r\n        headers: finalOptions.header\r\n      })\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 创建新对话（修复版本）\r\n  async createConversation(title, roleId, styleId) {\r\n    try {\r\n      const data = {\r\n        user_id: this.userId,\r\n        title: title || '新对话',\r\n        role_id: roleId,\r\n        style_id: styleId,\r\n        is_active: true,\r\n        created_at: new Date().toISOString(),\r\n        updated_at: new Date().toISOString()\r\n      }\r\n\r\n      console.log('MCP: 创建对话，数据:', data)\r\n      \r\n      const result = await this.callApi('conversations', {\r\n        method: 'POST',\r\n        header: {\r\n          'Content-Type': 'application/json',\r\n          'Prefer': 'return=representation'\r\n        },\r\n        data: data\r\n      })\r\n\r\n      console.log('MCP: 创建对话成功:', result)\r\n      return result ? result[0] : null\r\n    } catch (error) {\r\n      console.error('MCP: 创建对话失败:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 获取用户的所有对话（修复HTTP 400错误）\r\n  async getUserConversations() {\r\n    try {\r\n      console.log('MCP: 获取用户对话，用户ID:', this.userId)\r\n      \r\n      const result = await this.callApi('conversations', {\r\n        method: 'GET',\r\n        queryParams: {\r\n          user_id: `eq.${this.userId}`,\r\n          is_active: 'eq.true',\r\n          select: '*'\r\n        }\r\n      })\r\n\r\n      console.log('MCP: 获取对话成功，数量:', result ? result.length : 0)\r\n      return result || []\r\n    } catch (error) {\r\n      console.error('MCP: 获取用户对话失败:', error)\r\n      // 返回空数组而不是抛出错误，让降级方案处理\r\n      return []\r\n    }\r\n  }\r\n\r\n  // 获取对话的详细信息（修复版本）\r\n  async getConversation(conversationId) {\r\n    try {\r\n      console.log('MCP: 获取对话详情，对话ID:', conversationId)\r\n      \r\n      const result = await this.callApi('conversations', {\r\n        method: 'GET',\r\n        queryParams: {\r\n          id: `eq.${conversationId}`,\r\n          select: '*'\r\n        }\r\n      })\r\n\r\n      console.log('MCP: 获取对话详情成功:', result ? result[0] : null)\r\n      return result ? result[0] : null\r\n    } catch (error) {\r\n      console.error('MCP: 获取对话详情失败:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  // 获取对话的所有消息（修复版本）\r\n  async getConversationMessages(conversationId) {\r\n    try {\r\n      console.log('MCP: 获取对话消息，对话ID:', conversationId)\r\n      \r\n      const result = await this.callApi('messages', {\r\n        method: 'GET',\r\n        queryParams: {\r\n          conversation_id: `eq.${conversationId}`,\r\n          order: 'created_at.asc',\r\n          select: '*'\r\n        }\r\n      })\r\n\r\n      console.log('MCP: 获取消息成功，数量:', result ? result.length : 0)\r\n      return result || []\r\n    } catch (error) {\r\n      console.error('MCP: 获取对话消息失败:', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  // 保存消息（修复版本）\r\n  async saveMessage(conversationId, role, content) {\r\n    try {\r\n      const data = {\r\n        conversation_id: conversationId,\r\n        role: role,\r\n        content: content,\r\n        created_at: new Date().toISOString()\r\n      }\r\n\r\n      console.log('MCP: 保存消息，数据:', data)\r\n      \r\n      const result = await this.callApi('messages', {\r\n        method: 'POST',\r\n        header: {\r\n          'Content-Type': 'application/json',\r\n          'Prefer': 'return=representation'\r\n        },\r\n        data: data\r\n      })\r\n\r\n      console.log('MCP: 保存消息成功:', result)\r\n      return result ? result[0] : null\r\n    } catch (error) {\r\n      console.error('MCP: 保存消息失败:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 更新对话标题（修复版本）\r\n  async updateConversationTitle(conversationId, title) {\r\n    try {\r\n      const data = {\r\n        title: title,\r\n        updated_at: new Date().toISOString()\r\n      }\r\n\r\n      console.log('MCP: 更新对话标题，对话ID:', conversationId, '标题:', title)\r\n      \r\n      const result = await this.callApi('conversations', {\r\n        method: 'PATCH',\r\n        queryParams: {\r\n          id: `eq.${conversationId}`\r\n        },\r\n        data: data\r\n      })\r\n\r\n      console.log('MCP: 更新对话标题成功:', result)\r\n      return result ? result[0] : null\r\n    } catch (error) {\r\n      console.error('MCP: 更新对话标题失败:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 删除对话（软删除，修复版本）\r\n  async deleteConversation(conversationId) {\r\n    try {\r\n      const data = {\r\n        is_active: false,\r\n        updated_at: new Date().toISOString()\r\n      }\r\n\r\n      console.log('MCP: 删除对话，对话ID:', conversationId)\r\n      \r\n      const result = await this.callApi('conversations', {\r\n        method: 'PATCH',\r\n        queryParams: {\r\n          id: `eq.${conversationId}`\r\n        },\r\n        data: data\r\n      })\r\n\r\n      console.log('MCP: 删除对话成功:', result)\r\n      return result ? result[0] : null\r\n    } catch (error) {\r\n      console.error('MCP: 删除对话失败:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 获取对话统计信息（修复版本）\r\n  async getConversationStats() {\r\n    try {\r\n      const conversations = await this.getUserConversations()\r\n      \r\n      const stats = {\r\n        total: conversations.length,\r\n        recent: conversations.filter(conv => {\r\n          const oneWeekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\r\n          return new Date(conv.created_at) > oneWeekAgo\r\n        }).length\r\n      }\r\n\r\n      console.log('MCP: 获取统计信息成功:', stats)\r\n      return stats\r\n    } catch (error) {\r\n      console.error('MCP: 获取统计信息失败:', error)\r\n      return { total: 0, recent: 0 }\r\n    }\r\n  }\r\n}\r\n\r\n// 本地存储降级方案\r\nclass LocalStorageService {\r\n  constructor() {\r\n    this.storageKey = 'ai_conversations'\r\n    this.userId = getUserId()\r\n  }\r\n\r\n  // 生成本地ID\r\n  generateId() {\r\n    return 'local_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9)\r\n  }\r\n\r\n  // 获取所有对话\r\n  getConversations() {\r\n    const data = uni.getStorageSync(this.storageKey) || {}\r\n    return data[this.userId] || []\r\n  }\r\n\r\n  // 保存对话\r\n  saveConversation(conversation) {\r\n    const data = uni.getStorageSync(this.storageKey) || {}\r\n    const userData = data[this.userId] || []\r\n    \r\n    if (!conversation.id) {\r\n      conversation.id = this.generateId()\r\n      conversation.created_at = new Date().toISOString()\r\n      conversation.updated_at = conversation.created_at\r\n      userData.push(conversation)\r\n    } else {\r\n      const index = userData.findIndex(c => c.id === conversation.id)\r\n      if (index >= 0) {\r\n        conversation.updated_at = new Date().toISOString()\r\n        userData[index] = conversation\r\n      } else {\r\n        userData.push(conversation)\r\n      }\r\n    }\r\n\r\n    data[this.userId] = userData\r\n    uni.setStorageSync(this.storageKey, data)\r\n    \r\n    return conversation\r\n  }\r\n\r\n  // 保存消息\r\n  saveMessage(conversationId, role, content) {\r\n    const conversations = this.getConversations()\r\n    const conversation = conversations.find(c => c.id === conversationId)\r\n    \r\n    if (conversation) {\r\n      if (!conversation.messages) {\r\n        conversation.messages = []\r\n      }\r\n      \r\n      const message = {\r\n        id: this.generateId(),\r\n        conversation_id: conversationId,\r\n        role: role,\r\n        content: content,\r\n        created_at: new Date().toISOString()\r\n      }\r\n      \r\n      conversation.messages.push(message)\r\n      conversation.updated_at = new Date().toISOString()\r\n      \r\n      this.saveConversation(conversation)\r\n      return message\r\n    }\r\n    \r\n    return null\r\n  }\r\n\r\n  // 删除对话\r\n  deleteConversation(conversationId) {\r\n    const conversations = this.getConversations()\r\n    const filtered = conversations.filter(c => c.id !== conversationId)\r\n    \r\n    const data = uni.getStorageSync(this.storageKey) || {}\r\n    data[this.userId] = filtered\r\n    uni.setStorageSync(this.storageKey, data)\r\n    \r\n    return true\r\n  }\r\n}\r\n\r\n// MCP增强的统一服务接口\r\nclass ConversationService {\r\n  constructor() {\r\n    this.supabaseService = new SupabaseService()\r\n    this.localService = new LocalStorageService()\r\n    this.useSupabase = this.supabaseService.isConnected // 使用MCP连接状态\r\n  }\r\n\r\n  // 检查Supabase连接（增强版本）\r\n  async checkSupabaseConnection() {\r\n    try {\r\n      const isConnected = this.supabaseService.isConnected\r\n      this.useSupabase = isConnected\r\n      console.log('MCP连接状态检查:', { useSupabase: this.useSupabase, isConnected: isConnected })\r\n      return isConnected\r\n    } catch (error) {\r\n      console.warn('MCP连接检查失败，切换到本地存储:', error)\r\n      this.useSupabase = false\r\n      return false\r\n    }\r\n  }\r\n\r\n  // 智能创建对话（增强版本）\r\n  async createConversation(title, roleId, styleId) {\r\n    // 优先使用MCP服务\r\n    if (this.useSupabase) {\r\n      try {\r\n        const result = await this.supabaseService.createConversation(title, roleId, styleId)\r\n        if (result) {\r\n          // 同时更新本地存储作为缓存\r\n          this.localService.saveConversation(result)\r\n          return result\r\n        }\r\n      } catch (error) {\r\n        console.warn('MCP创建对话失败，使用本地存储:', error)\r\n        this.useSupabase = false\r\n      }\r\n    }\r\n    \r\n    // 降级到本地存储\r\n    return this.localService.saveConversation({\r\n      title: title || '新对话',\r\n      role_id: roleId,\r\n      style_id: styleId,\r\n      is_active: true,\r\n      messages: []\r\n    })\r\n  }\r\n\r\n  // 智能获取用户对话（增强版本）\r\n  async getUserConversations() {\r\n    // 优先使用MCP服务\r\n    if (this.useSupabase) {\r\n      try {\r\n        const result = await this.supabaseService.getUserConversations()\r\n        if (result && result.length > 0) {\r\n          // 同步到本地存储作为缓存\r\n          result.forEach(conv => this.localService.saveConversation(conv))\r\n          return result\r\n        }\r\n      } catch (error) {\r\n        console.warn('MCP获取对话失败，切换到本地存储:', error)\r\n        this.useSupabase = false\r\n      }\r\n    }\r\n    \r\n    // 降级到本地存储\r\n    return this.localService.getConversations()\r\n  }\r\n\r\n  // 保存消息\r\n  async saveMessage(conversationId, role, content) {\r\n    if (this.useSupabase) {\r\n      try {\r\n        return await this.supabaseService.saveMessage(conversationId, role, content)\r\n      } catch (error) {\r\n        this.useSupabase = false\r\n      }\r\n    }\r\n    \r\n    return this.localService.saveMessage(conversationId, role, content)\r\n  }\r\n\r\n  // 更新对话标题\r\n  async updateConversationTitle(conversationId, title) {\r\n    if (this.useSupabase) {\r\n      try {\r\n        return await this.supabaseService.updateConversationTitle(conversationId, title)\r\n      } catch (error) {\r\n        this.useSupabase = false\r\n      }\r\n    }\r\n    \r\n    const conversations = this.localService.getConversations()\r\n    const conversation = conversations.find(c => c.id === conversationId)\r\n    if (conversation) {\r\n      conversation.title = title\r\n      return this.localService.saveConversation(conversation)\r\n    }\r\n    \r\n    return null\r\n  }\r\n\r\n  // 删除对话\r\n  async deleteConversation(conversationId) {\r\n    if (this.useSupabase) {\r\n      try {\r\n        return await this.supabaseService.deleteConversation(conversationId)\r\n      } catch (error) {\r\n        this.useSupabase = false\r\n      }\r\n    }\r\n    \r\n    return this.localService.deleteConversation(conversationId)\r\n  }\r\n\r\n  // 获取统计信息\r\n  async getConversationStats() {\r\n    const conversations = await this.getUserConversations()\r\n    \r\n    const stats = {\r\n      total: conversations.length,\r\n      recent: conversations.filter(conv => {\r\n        const oneWeekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\r\n        return new Date(conv.created_at) > oneWeekAgo\r\n      }).length\r\n    }\r\n\r\n    return stats\r\n  }\r\n}\r\n\r\n// 导出服务实例\r\nexport default new ConversationService()"],"names":["uni"],"mappings":"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"}