{"version":3,"file":"hole.js","sources":["pages/hole/hole.vue","../../../HBuilderX/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9sZS9ob2xlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"hole-page\">\r\n\t\t<!-- Â§¥ÈÉ® -->\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"header-content\">\r\n\t\t\t\t<text class=\"title\">üå≥ Ê†ëÊ¥û</text>\r\n\t\t\t\t<text class=\"subtitle\">Âú®ËøôÈáåÂÄæËØâ‰Ω†ÁöÑÂøÉÂ£∞ÔºåÈáäÊîæÂÜÖÂøÉÁöÑÂéãÂäõ</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- Â∏ñÂ≠êÂàóË°® -->\r\n\t\t<scroll-view \r\n\t\t\tclass=\"posts-container\" \r\n\t\t\tscroll-y=\"true\" \r\n\t\t\t:refresher-enabled=\"true\"\r\n\t\t\t:refresher-triggered=\"isRefreshing\"\r\n\t\t\t@refresherrefresh=\"onRefresh\"\r\n\t\t\t@scrolltolower=\"loadMore\"\r\n\t\t\t:lower-threshold=\"100\"\r\n\t\t\t:scroll-top=\"scrollTop\"\r\n\t\t>\r\n\t\t\t<view class=\"posts\">\r\n\t\t\t\t<!-- Á©∫Áä∂ÊÄÅ -->\r\n\t\t\t\t<view class=\"empty-state\" v-if=\"!isLoading && posts.length === 0\">\r\n\t\t\t\t\t<view class=\"empty-icon-wrapper\">\r\n\t\t\t\t\t\t<text class=\"empty-icon\">üåô</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"empty-text\">Ê†ëÊ¥ûÈáåËøòÊ≤°ÊúâÂÜÖÂÆπ</text>\r\n\t\t\t\t\t<text class=\"empty-desc\">Êàê‰∏∫Á¨¨‰∏Ä‰∏™ÂàÜ‰∫´ÂøÉ‰∫ãÁöÑ‰∫∫Âêß~</text>\r\n\t\t\t\t\t<button class=\"empty-action-btn\" @click=\"scrollToTop\">\r\n\t\t\t\t\t\tÂºÄÂßãÂàÜ‰∫´\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- Â∏ñÂ≠êÈ°π -->\r\n\t\t\t\t<view \r\n\t\t\t\t\tclass=\"post-item\" \r\n\t\t\t\t\tv-for=\"(post, index) in posts\" \r\n\t\t\t\t\t:key=\"post.id || index\"\r\n\t\t\t\t\t:style=\"{animationDelay: (index * 0.05) + 's'}\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view class=\"post-header\">\r\n\t\t\t\t\t\t<view class=\"post-author\">\r\n\t\t\t\t\t\t\t<view class=\"author-avatar\">\r\n\t\t\t\t\t\t\t\t<text class=\"avatar-icon\">üåô</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"author-info\">\r\n\t\t\t\t\t\t\t\t<text class=\"author-name\">{{post.is_anonymous ? 'ÂåøÂêçÁî®Êà∑' : 'Áî®Êà∑'}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"post-time-header\">{{formatTime(post.created_at || post.time)}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"post-header-right\">\r\n\t\t\t\t\t\t\t<view class=\"post-emotion\" v-if=\"post.emotion\">\r\n\t\t\t\t\t\t\t\t<text class=\"emotion-badge\">{{getEmotionLabel(post.emotion)}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tclass=\"delete-btn\" \r\n\t\t\t\t\t\t\t\tv-if=\"isMyPost(post)\"\r\n\t\t\t\t\t\t\t\t@click.stop=\"deletePost(post, index)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<text class=\"delete-icon\">üóëÔ∏è</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"post-content\">{{post.content}}</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"post-footer\">\r\n\t\t\t\t\t\t<view class=\"post-actions\">\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tclass=\"action-item like-action\" \r\n\t\t\t\t\t\t\t\t:class=\"{liked: post.isLiked, animating: post.isLiking}\"\r\n\t\t\t\t\t\t\t\t@click=\"toggleLike(post, index)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<text class=\"action-icon\">‚ù§Ô∏è</text>\r\n\t\t\t\t\t\t\t\t<text class=\"action-count\">{{post.like_count || 0}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tclass=\"action-item comment-action\"\r\n\t\t\t\t\t\t\t\t:class=\"{active: post.showComments}\"\r\n\t\t\t\t\t\t\t\t@click=\"showComments(post, index)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<text class=\"action-icon\">üí¨</text>\r\n\t\t\t\t\t\t\t\t<text class=\"action-count\">{{post.comment_count || 0}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- ËØÑËÆ∫Âå∫Âüü - ÈªòËÆ§Â±ïÂºÄÔºåÁ™ÅÂá∫ÊòæÁ§∫ -->\r\n\t\t\t\t\t<view class=\"comments-section\" :class=\"{expanded: post.showComments}\">\r\n\t\t\t\t\t\t<view class=\"comments-header\" @click=\"showComments(post, index)\">\r\n\t\t\t\t\t\t\t<text class=\"comments-title\">üí¨ ËØÑËÆ∫ ({{post.comment_count || 0}})</text>\r\n\t\t\t\t\t\t\t<text class=\"comments-toggle\">{{post.showComments ? 'Êî∂Ëµ∑' : 'Â±ïÂºÄ'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- ËØÑËÆ∫ÂàóË°® - Êõ¥Á™ÅÂá∫ -->\r\n\t\t\t\t\t\t<view class=\"comments-list\" v-if=\"post.showComments\">\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tclass=\"comment-item\" \r\n\t\t\t\t\t\t\t\tv-for=\"(comment, cIndex) in post.comments\" \r\n\t\t\t\t\t\t\t\t:key=\"cIndex\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<view class=\"comment-avatar\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"comment-avatar-icon\">üí≠</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"comment-body\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"comment-header\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"comment-author\">{{comment.is_anonymous ? 'ÂåøÂêçÁî®Êà∑' : 'Áî®Êà∑'}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"comment-time\">{{formatTime(comment.created_at)}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text class=\"comment-content\">{{comment.content}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"no-comments\" v-if=\"!post.comments || post.comments.length === 0\">\r\n\t\t\t\t\t\t\t\t<text class=\"no-comments-text\">ËøòÊ≤°ÊúâËØÑËÆ∫ÔºåÂø´Êù•Á¨¨‰∏Ä‰∏™ÂõûÂ∫îÂêß~</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- Ê∑ªÂä†ËØÑËÆ∫ - Êõ¥Á¥ßÂáë -->\r\n\t\t\t\t\t\t<view class=\"comment-input-area\" v-if=\"post.showComments\">\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\tclass=\"comment-input\" \r\n\t\t\t\t\t\t\t\tv-model=\"post.commentText\" \r\n\t\t\t\t\t\t\t\tplaceholder=\"ÂÜô‰∏ã‰Ω†ÁöÑÂõûÂ∫î...\"\r\n\t\t\t\t\t\t\t\t@confirm=\"submitComment(post, index)\"\r\n\t\t\t\t\t\t\t\tmaxlength=\"200\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<button \r\n\t\t\t\t\t\t\t\tclass=\"comment-submit-btn\" \r\n\t\t\t\t\t\t\t\t@click=\"submitComment(post, index)\"\r\n\t\t\t\t\t\t\t\t:disabled=\"!post.commentText || post.commentText.trim() === ''\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tÂèëÈÄÅ\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- Âä†ËΩΩÊõ¥Â§ö -->\r\n\t\t\t\t<view class=\"load-more\" v-if=\"hasMore && !isLoading && posts.length > 0\">\r\n\t\t\t\t\t<view class=\"load-more-content\">\r\n\t\t\t\t\t\t<text class=\"load-more-icon\">‚¨áÔ∏è</text>\r\n\t\t\t\t\t\t<text class=\"load-more-text\">‰∏äÊãâÂä†ËΩΩÊõ¥Â§ö</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- Âä†ËΩΩ‰∏≠ -->\r\n\t\t\t\t<view class=\"loading\" v-if=\"isLoading && posts.length > 0\">\r\n\t\t\t\t\t<view class=\"loading-spinner\">\r\n\t\t\t\t\t\t<text class=\"spinner-dot\">.</text>\r\n\t\t\t\t\t\t<text class=\"spinner-dot\">.</text>\r\n\t\t\t\t\t\t<text class=\"spinner-dot\">.</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"loading-text\">Âä†ËΩΩ‰∏≠...</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- Ê≤°ÊúâÊõ¥Â§ö -->\r\n\t\t\t\t<view class=\"no-more\" v-if=\"!hasMore && posts.length > 0\">\r\n\t\t\t\t\t<view class=\"no-more-line\"></view>\r\n\t\t\t\t\t<text class=\"no-more-text\">Ê≤°ÊúâÊõ¥Â§ö‰∫Ü</text>\r\n\t\t\t\t\t<view class=\"no-more-line\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<!-- ÂõûÂà∞È°∂ÈÉ®ÊåâÈíÆ -->\r\n\t\t<view \r\n\t\t\tclass=\"back-to-top\" \r\n\t\t\tv-if=\"showBackToTop\"\r\n\t\t\t@click=\"scrollToTop\"\r\n\t\t>\r\n\t\t\t<text class=\"back-to-top-icon\">‚Üë</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- Âõ∫ÂÆöÂ∫ïÈÉ®ÁöÑÂèëÂ∏ÉÂå∫Âüü -->\r\n\t\t<view class=\"fixed-publish-section\" :class=\"{collapsed: !showPublishSection, expanded: showPublishSection}\">\r\n\t\t\t<view class=\"publish-header\" @click=\"togglePublishSection\">\r\n\t\t\t\t<text class=\"publish-title\">üìù ÂàÜ‰∫´‰Ω†ÁöÑÂøÉÊÉÖ</text>\r\n\t\t\t\t<text class=\"publish-toggle\">{{showPublishSection ? 'Êî∂Ëµ∑ ‚ñ≤' : 'Â±ïÂºÄ ‚ñº'}}</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"publish-content\" v-if=\"showPublishSection\">\r\n\t\t\t\t<view class=\"input-area\">\r\n\t\t\t\t\t<textarea \r\n\t\t\t\t\t\tclass=\"textarea\" \r\n\t\t\t\t\t\tplaceholder=\"ÂÜô‰∏ã‰Ω†ÁöÑÂøÉ‰∫ãÔºåÂàÜ‰∫´‰Ω†ÁöÑÊÑüÂèó...\" \r\n\t\t\t\t\t\tv-model=\"content\"\r\n\t\t\t\t\t\tmaxlength=\"500\"\r\n\t\t\t\t\t\t:disabled=\"isSubmitting\"\r\n\t\t\t\t\t\t@focus=\"onTextareaFocus\"\r\n\t\t\t\t\t\t@blur=\"onTextareaBlur\"\r\n\t\t\t\t\t></textarea>\r\n\t\t\t\t\t<view class=\"input-footer\">\r\n\t\t\t\t\t\t<text class=\"word-count\" :class=\"{warning: content.length > 450}\">\r\n\t\t\t\t\t\t\t{{content.length}}/500\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- ÊÉÖÁª™Ê†áÁ≠æÈÄâÊã© -->\r\n\t\t\t\t<view class=\"emotion-section\">\r\n\t\t\t\t\t<text class=\"emotion-label\">ÈÄâÊã©‰Ω†ÁöÑÊÉÖÁª™</text>\r\n\t\t\t\t\t<scroll-view class=\"emotion-tags\" scroll-x=\"true\" show-scrollbar=\"false\">\r\n\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\tclass=\"emotion-tag\" \r\n\t\t\t\t\t\t\tv-for=\"(emotion, index) in emotions\" \r\n\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t:class=\"{active: selectedEmotion === emotion.value}\"\r\n\t\t\t\t\t\t\t@click=\"selectEmotion(emotion.value)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<text class=\"emotion-icon\">{{emotion.icon}}</text>\r\n\t\t\t\t\t\t\t<text class=\"emotion-text\">{{emotion.label}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"actions\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"btn btn-secondary\" \r\n\t\t\t\t\t\t@click=\"clearContent\"\r\n\t\t\t\t\t\t:disabled=\"isSubmitting || !content.trim()\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tÊ∏ÖÁ©∫\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclass=\"btn btn-primary\" \r\n\t\t\t\t\t\t@click=\"submitContent\"\r\n\t\t\t\t\t\t:disabled=\"isSubmitting || !content.trim()\"\r\n\t\t\t\t\t\t:loading=\"isSubmitting\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{isSubmitting ? 'ÂèëÂ∏É‰∏≠...' : 'ÂåøÂêçÂèëÂ∏É'}}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport conversationService from '@/utils/supabase.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tselectedEmotion: 'neutral',\r\n\t\t\t\tisSubmitting: false,\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tisRefreshing: false,\r\n\t\t\t\thasMore: true,\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tpageSize: 20,\r\n\t\t\t\tposts: [],\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tshowBackToTop: false,\r\n\t\t\t\ttextareaFocused: false,\r\n\t\t\t\tshowPublishSection: false, // ÈªòËÆ§ÊäòÂè†ÂèëÂ∏ÉÂå∫ÂüüÔºåÂõ∫ÂÆöÂú®Â∫ïÈÉ®\r\n\t\t\t\t\r\n\t\t\t\t// ÊÉÖÁª™Ê†áÁ≠æ\r\n\t\t\t\temotions: [\r\n\t\t\t\t\t{ value: 'happy', label: 'ÂºÄÂøÉ', icon: 'üòä', color: '#FFD700' },\r\n\t\t\t\t\t{ value: 'sad', label: 'ÈöæËøá', icon: 'üò¢', color: '#87CEEB' },\r\n\t\t\t\t\t{ value: 'anxious', label: 'ÁÑ¶Ëôë', icon: 'üò∞', color: '#FF6B6B' },\r\n\t\t\t\t\t{ value: 'angry', label: 'ÊÑ§ÊÄí', icon: 'üò†', color: '#FF4757' },\r\n\t\t\t\t\t{ value: 'neutral', label: 'Âπ≥Èùô', icon: 'üòê', color: '#95A5A6' },\r\n\t\t\t\t\t{ value: 'tired', label: 'Áñ≤ÊÉ´', icon: 'üò¥', color: '#A8E6CF' },\r\n\t\t\t\t\t{ value: 'confused', label: 'Âõ∞ÊÉë', icon: 'üòï', color: '#FFA07A' },\r\n\t\t\t\t\t{ value: 'grateful', label: 'ÊÑüÊÅ©', icon: 'üôè', color: '#FFD93D' }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonLoad() {\r\n\t\t\tthis.loadPosts()\r\n\t\t},\r\n\t\t\r\n\t\tonShow() {\r\n\t\t\t// È°µÈù¢ÊòæÁ§∫Êó∂Âà∑Êñ∞Â∏ñÂ≠êÂàóË°®\r\n\t\t\tif (this.posts.length > 0) {\r\n\t\t\t\tthis.onRefresh()\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\t// ÊñáÊú¨ÂüüËÅöÁÑ¶\r\n\t\t\tonTextareaFocus() {\r\n\t\t\t\tthis.textareaFocused = true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊñáÊú¨ÂüüÂ§±ÁÑ¶\r\n\t\t\tonTextareaBlur() {\r\n\t\t\t\tthis.textareaFocused = false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÈÄâÊã©ÊÉÖÁª™\r\n\t\t\tselectEmotion(emotion) {\r\n\t\t\t\tthis.selectedEmotion = emotion\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ëé∑ÂèñÊÉÖÁª™Ê†áÁ≠æ\r\n\t\t\tgetEmotionLabel(emotion) {\r\n\t\t\t\tconst emotionObj = this.emotions.find(e => e.value === emotion)\r\n\t\t\t\treturn emotionObj ? `${emotionObj.icon} ${emotionObj.label}` : emotion\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ê∏ÖÁ©∫ÂÜÖÂÆπ\r\n\t\t\tclearContent() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: 'Á°ÆËÆ§Ê∏ÖÁ©∫',\r\n\t\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ËæìÂÖ•ÁöÑÂÜÖÂÆπÂêóÔºü',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.content = ''\r\n\t\t\t\t\t\t\tthis.selectedEmotion = 'neutral'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Êèê‰∫§ÂÜÖÂÆπ\r\n\t\t\tasync submitContent() {\r\n\t\t\t\tif (!this.content.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ËØ∑ËæìÂÖ•ÂÜÖÂÆπ',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.isSubmitting = true\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// Â∞ùËØï‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì\r\n\t\t\t\t\tlet post = null\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tpost = await conversationService.supabaseService.createTreeholePost(\r\n\t\t\t\t\t\t\tthis.content,\r\n\t\t\t\t\t\t\tthis.selectedEmotion,\r\n\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•Ôºå‰ΩøÁî®Êú¨Âú∞Â≠òÂÇ®:', error)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Â¶ÇÊûúÊï∞ÊçÆÂ∫ì‰øùÂ≠òÂ§±Ë¥•Ôºå‰ΩøÁî®Êú¨Âú∞Â≠òÂÇ®\r\n\t\t\t\t\tif (!post) {\r\n\t\t\t\t\t\tconst now = new Date()\r\n\t\t\t\t\t\tconst currentUserId = conversationService.supabaseService.getUserId()\r\n\t\t\t\t\t\tpost = {\r\n\t\t\t\t\t\t\tid: 'local_' + Date.now(),\r\n\t\t\t\t\t\t\tuser_id: currentUserId,\r\n\t\t\t\t\t\t\tcontent: this.content,\r\n\t\t\t\t\t\t\temotion: this.selectedEmotion,\r\n\t\t\t\t\t\t\tis_anonymous: true,\r\n\t\t\t\t\t\t\tlike_count: 0,\r\n\t\t\t\t\t\t\tcomment_count: 0,\r\n\t\t\t\t\t\t\tisLiked: false,\r\n\t\t\t\t\t\t\tcomments: [],\r\n\t\t\t\t\t\t\tshowComments: false,\r\n\t\t\t\t\t\t\tcommentText: '',\r\n\t\t\t\t\t\t\tcreated_at: now.toISOString(),\r\n\t\t\t\t\t\t\ttime: this.formatTime(now.toISOString())\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\r\n\t\t\t\t\t\tconst localPosts = uni.getStorageSync('treehole_posts') || []\r\n\t\t\t\t\t\tlocalPosts.unshift(post)\r\n\t\t\t\t\t\tuni.setStorageSync('treehole_posts', localPosts.slice(0, 100))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Ê∑ªÂä†Âà∞ÂàóË°®\r\n\t\t\t\t\tthis.posts.unshift({\r\n\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\tisLiked: false,\r\n\t\t\t\t\t\tcomments: [],\r\n\t\t\t\t\t\tshowComments: false,\r\n\t\t\t\t\t\tcommentText: '',\r\n\t\t\t\t\t\ttime: post.time || this.formatTime(post.created_at)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Ê∏ÖÁ©∫ËæìÂÖ•ÔºàÁõ¥Êé•Ê∏ÖÁ©∫Ôºå‰∏çÊòæÁ§∫Á°ÆËÆ§ÂºπÁ™óÔºâ\r\n\t\t\t\t\tthis.content = ''\r\n\t\t\t\t\tthis.selectedEmotion = 'neutral'\r\n\t\t\t\t\t\r\n\t\t\t\t\t// ÊªöÂä®Âà∞È°∂ÈÉ®\r\n\t\t\t\t\tthis.scrollToTop()\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ÂèëÂ∏ÉÊàêÂäü',\r\n\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('ÂèëÂ∏ÉÂ§±Ë¥•:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.isSubmitting = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Âä†ËΩΩÂ∏ñÂ≠êÂàóË°®\r\n\t\t\tasync loadPosts(refresh = false) {\r\n\t\t\t\tif (this.isLoading) return\r\n\t\t\t\t\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\t\r\n\t\t\t\tif (refresh) {\r\n\t\t\t\t\tthis.currentPage = 1\r\n\t\t\t\t\tthis.hasMore = true\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// Â∞ùËØï‰ªéÊï∞ÊçÆÂ∫ìÂä†ËΩΩ\r\n\t\t\t\t\tlet newPosts = []\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tnewPosts = await conversationService.supabaseService.getTreeholePosts(\r\n\t\t\t\t\t\t\tthis.currentPage,\r\n\t\t\t\t\t\t\tthis.pageSize\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Ê£ÄÊü•Áî®Êà∑ÁÇπËµûÁä∂ÊÄÅÔºåÈªòËÆ§Â±ïÂºÄËØÑËÆ∫\r\n\t\t\t\t\t\tfor (let post of newPosts) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tpost.isLiked = await conversationService.supabaseService.checkUserLikedPost(post.id)\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tpost.isLiked = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Â¶ÇÊûúÊúâËØÑËÆ∫ÔºåÈªòËÆ§Â±ïÂºÄÂπ∂Âä†ËΩΩËØÑËÆ∫\r\n\t\t\t\t\t\t\tif (post.comment_count > 0) {\r\n\t\t\t\t\t\t\t\tpost.showComments = true\r\n\t\t\t\t\t\t\t\t// Ëá™Âä®Âä†ËΩΩËØÑËÆ∫\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tpost.comments = await conversationService.supabaseService.getTreeholeComments(post.id)\r\n\t\t\t\t\t\t\t\t\tif (post.comments && post.comments.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tpost.comments = post.comments.map(comment => ({\r\n\t\t\t\t\t\t\t\t\t\t\t...comment,\r\n\t\t\t\t\t\t\t\t\t\t\ttime: this.formatTime(comment.created_at)\r\n\t\t\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\t\tconsole.error('Âä†ËΩΩËØÑËÆ∫Â§±Ë¥•:', error)\r\n\t\t\t\t\t\t\t\t\tpost.comments = []\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tpost.comments = []\r\n\t\t\t\t\t\t\t\tpost.showComments = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpost.commentText = ''\r\n\t\t\t\t\t\t\tpost.time = this.formatTime(post.created_at)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log('‰ªéÊï∞ÊçÆÂ∫ìÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®Êú¨Âú∞Â≠òÂÇ®:', error)\r\n\t\t\t\t\t\t// ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩ\r\n\t\t\t\t\t\tconst localPosts = uni.getStorageSync('treehole_posts') || []\r\n\t\t\t\t\t\tnewPosts = localPosts.slice(\r\n\t\t\t\t\t\t\t(this.currentPage - 1) * this.pageSize,\r\n\t\t\t\t\t\t\tthis.currentPage * this.pageSize\r\n\t\t\t\t\t\t).map(post => {\r\n\t\t\t\t\t\t\t// Â¶ÇÊûúÊúâËØÑËÆ∫ÔºåÈªòËÆ§Â±ïÂºÄ\r\n\t\t\t\t\t\t\tconst hasComments = post.comment_count > 0 || (post.comments && post.comments.length > 0)\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\t\t\tisLiked: false,\r\n\t\t\t\t\t\t\t\tcomments: post.comments || [],\r\n\t\t\t\t\t\t\t\tshowComments: hasComments, // ÊúâËØÑËÆ∫Êó∂ÈªòËÆ§Â±ïÂºÄ\r\n\t\t\t\t\t\t\t\tcommentText: '',\r\n\t\t\t\t\t\t\t\ttime: post.time || this.formatTime(post.created_at)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (refresh) {\r\n\t\t\t\t\t\tthis.posts = newPosts\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.posts = [...this.posts, ...newPosts]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Ê£ÄÊü•ÊòØÂê¶ËøòÊúâÊõ¥Â§ö\r\n\t\t\t\t\tthis.hasMore = newPosts.length >= this.pageSize\r\n\t\t\t\t\tif (this.hasMore) {\r\n\t\t\t\t\t\tthis.currentPage++\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('Âä†ËΩΩÂ∏ñÂ≠êÂ§±Ë¥•:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.isLoading = false\r\n\t\t\t\t\tthis.isRefreshing = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ‰∏ãÊãâÂà∑Êñ∞\r\n\t\t\tonRefresh() {\r\n\t\t\t\tthis.isRefreshing = true\r\n\t\t\t\tthis.loadPosts(true)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Âä†ËΩΩÊõ¥Â§ö\r\n\t\t\tloadMore() {\r\n\t\t\t\tif (this.hasMore && !this.isLoading) {\r\n\t\t\t\t\tthis.loadPosts(false)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÂàáÊç¢ÁÇπËµû\r\n\t\t\tasync toggleLike(post, index) {\r\n\t\t\t\t// Ê∑ªÂä†Âä®ÁîªÊïàÊûú\r\n\t\t\t\tpost.isLiking = true\r\n\t\t\t\t\r\n\t\t\t\tif (!post.id || post.id.startsWith('local_')) {\r\n\t\t\t\t\t// Êú¨Âú∞Â∏ñÂ≠êÔºåÁõ¥Êé•Êõ¥Êñ∞\r\n\t\t\t\t\tpost.isLiked = !post.isLiked\r\n\t\t\t\t\tpost.like_count = (post.like_count || 0) + (post.isLiked ? 1 : -1)\r\n\t\t\t\t\tpost.like_count = Math.max(0, post.like_count)\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Êõ¥Êñ∞Êú¨Âú∞Â≠òÂÇ®\r\n\t\t\t\t\tconst localPosts = uni.getStorageSync('treehole_posts') || []\r\n\t\t\t\t\tconst localIndex = localPosts.findIndex(p => p.id === post.id)\r\n\t\t\t\t\tif (localIndex !== -1) {\r\n\t\t\t\t\t\tlocalPosts[localIndex] = { ...post }\r\n\t\t\t\t\t\tuni.setStorageSync('treehole_posts', localPosts)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tpost.isLiking = false\r\n\t\t\t\t\t}, 300)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst result = await conversationService.supabaseService.likeTreeholePost(post.id)\r\n\t\t\t\t\tpost.isLiked = result.liked\r\n\t\t\t\t\t// Êõ¥Êñ∞ÁÇπËµûÊï∞\r\n\t\t\t\t\tif (result.liked) {\r\n\t\t\t\t\t\tpost.like_count = (post.like_count || 0) + 1\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpost.like_count = Math.max(0, (post.like_count || 0) - 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('ÁÇπËµûÂ§±Ë¥•:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tpost.isLiking = false\r\n\t\t\t\t\t}, 300)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊòæÁ§∫ËØÑËÆ∫ - ÈªòËÆ§Â±ïÂºÄÔºåËá™Âä®Âä†ËΩΩ\r\n\t\t\tasync showComments(post, index) {\r\n\t\t\t\t// ÂàáÊç¢Â±ïÂºÄ/Êî∂Ëµ∑Áä∂ÊÄÅ\r\n\t\t\t\tpost.showComments = !post.showComments\r\n\t\t\t\t\r\n\t\t\t\t// Â¶ÇÊûúÂ±ïÂºÄ‰∏îËØÑËÆ∫Êú™Âä†ËΩΩÔºåËá™Âä®Âä†ËΩΩËØÑËÆ∫\r\n\t\t\t\tif (post.showComments && (!post.comments || post.comments.length === 0)) {\r\n\t\t\t\t\t// Âä†ËΩΩËØÑËÆ∫\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (post.id && !post.id.startsWith('local_')) {\r\n\t\t\t\t\t\t\tpost.comments = await conversationService.supabaseService.getTreeholeComments(post.id)\r\n\t\t\t\t\t\t\t// Ê†ºÂºèÂåñÊó∂Èó¥\r\n\t\t\t\t\t\t\tif (post.comments && post.comments.length > 0) {\r\n\t\t\t\t\t\t\t\tpost.comments = post.comments.map(comment => ({\r\n\t\t\t\t\t\t\t\t\t...comment,\r\n\t\t\t\t\t\t\t\t\ttime: this.formatTime(comment.created_at)\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩËØÑËÆ∫\r\n\t\t\t\t\t\t\tconst localPosts = uni.getStorageSync('treehole_posts') || []\r\n\t\t\t\t\t\t\tconst localPost = localPosts.find(p => p.id === post.id)\r\n\t\t\t\t\t\t\tif (localPost) {\r\n\t\t\t\t\t\t\t\tpost.comments = localPost.comments || []\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error('Âä†ËΩΩËØÑËÆ∫Â§±Ë¥•:', error)\r\n\t\t\t\t\t\tpost.comments = []\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÂàáÊç¢ÂèëÂ∏ÉÂå∫ÂüüÊòæÁ§∫\r\n\t\t\ttogglePublishSection() {\r\n\t\t\t\tthis.showPublishSection = !this.showPublishSection\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Êèê‰∫§ËØÑËÆ∫\r\n\t\t\tasync submitComment(post, index) {\r\n\t\t\t\tif (!post.commentText || !post.commentText.trim()) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst commentContent = post.commentText.trim()\r\n\t\t\t\tpost.commentText = ''\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet comment = null\r\n\t\t\t\t\tif (post.id && !post.id.startsWith('local_')) {\r\n\t\t\t\t\t\t// ‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì\r\n\t\t\t\t\t\tcomment = await conversationService.supabaseService.addTreeholeComment(\r\n\t\t\t\t\t\t\tpost.id,\r\n\t\t\t\t\t\t\tcommentContent,\r\n\t\t\t\t\t\t\ttrue\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\tpost.comment_count = (post.comment_count || 0) + 1\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Êú¨Âú∞Â≠òÂÇ®\r\n\t\t\t\t\t\tcomment = {\r\n\t\t\t\t\t\t\tid: 'comment_' + Date.now(),\r\n\t\t\t\t\t\t\tcontent: commentContent,\r\n\t\t\t\t\t\t\tis_anonymous: true,\r\n\t\t\t\t\t\t\tcreated_at: new Date().toISOString()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!post.comments) {\r\n\t\t\t\t\t\t\tpost.comments = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpost.comments.push(comment)\r\n\t\t\t\t\t\tpost.comment_count = (post.comment_count || 0) + 1\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Êõ¥Êñ∞Êú¨Âú∞Â≠òÂÇ®\r\n\t\t\t\t\t\tconst localPosts = uni.getStorageSync('treehole_posts') || []\r\n\t\t\t\t\t\tconst localIndex = localPosts.findIndex(p => p.id === post.id)\r\n\t\t\t\t\t\tif (localIndex !== -1) {\r\n\t\t\t\t\t\t\tlocalPosts[localIndex] = { ...post }\r\n\t\t\t\t\t\t\tuni.setStorageSync('treehole_posts', localPosts)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (comment) {\r\n\t\t\t\t\t\tif (!post.comments) {\r\n\t\t\t\t\t\t\tpost.comments = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpost.comments.push({\r\n\t\t\t\t\t\t\t...comment,\r\n\t\t\t\t\t\t\ttime: this.formatTime(comment.created_at)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ËØÑËÆ∫ÊàêÂäü',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('ËØÑËÆ∫Â§±Ë¥•:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ËØÑËÆ∫Â§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ê†ºÂºèÂåñÊó∂Èó¥\r\n\t\t\tformatTime(timeStr) {\r\n\t\t\t\tif (!timeStr) return ''\r\n\t\t\t\t\r\n\t\t\t\tconst now = new Date()\r\n\t\t\t\tconst time = new Date(timeStr)\r\n\t\t\t\tconst diff = now - time\r\n\t\t\t\t\r\n\t\t\t\t// Â∞è‰∫é1ÂàÜÈíü\r\n\t\t\t\tif (diff < 60 * 1000) {\r\n\t\t\t\t\treturn 'ÂàöÂàö'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Â∞è‰∫é1Â∞èÊó∂\r\n\t\t\t\tif (diff < 60 * 60 * 1000) {\r\n\t\t\t\t\treturn Math.floor(diff / (60 * 1000)) + 'ÂàÜÈíüÂâç'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Â∞è‰∫é1Â§©\r\n\t\t\t\tif (diff < 24 * 60 * 60 * 1000) {\r\n\t\t\t\t\treturn Math.floor(diff / (60 * 60 * 1000)) + 'Â∞èÊó∂Ââç'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Â∞è‰∫é7Â§©\r\n\t\t\t\tif (diff < 7 * 24 * 60 * 60 * 1000) {\r\n\t\t\t\t\treturn Math.floor(diff / (24 * 60 * 60 * 1000)) + 'Â§©Ââç'\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// ÊòæÁ§∫ÂÖ∑‰ΩìÊó•Êúü\r\n\t\t\t\tconst year = time.getFullYear()\r\n\t\t\t\tconst month = String(time.getMonth() + 1).padStart(2, '0')\r\n\t\t\t\tconst day = String(time.getDate()).padStart(2, '0')\r\n\t\t\t\tconst hour = String(time.getHours()).padStart(2, '0')\r\n\t\t\t\tconst minute = String(time.getMinutes()).padStart(2, '0')\r\n\t\t\t\t\r\n\t\t\t\tif (year === now.getFullYear()) {\r\n\t\t\t\t\treturn `${month}-${day} ${hour}:${minute}`\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn `${year}-${month}-${day} ${hour}:${minute}`\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊªöÂä®Âà∞È°∂ÈÉ®\r\n\t\t\tscrollToTop() {\r\n\t\t\t\tthis.scrollTop = 0\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.scrollTop = Math.random()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Âà§Êñ≠ÊòØÂê¶ÊòØÂΩìÂâçÁî®Êà∑ÁöÑÂ∏ñÂ≠ê\r\n\t\t\tisMyPost(post) {\r\n\t\t\t\tconst currentUserId = conversationService.supabaseService.getUserId()\r\n\t\t\t\treturn post.user_id === currentUserId\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Âà†Èô§Â∏ñÂ≠ê\r\n\t\t\tasync deletePost(post, index) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\r\n\t\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°ÂøÉ‰∫ãÂêóÔºüÂà†Èô§ÂêéÂ∞ÜÊó†Ê≥ïÊÅ¢Â§ç„ÄÇ',\r\n\t\t\t\t\tconfirmText: 'Âà†Èô§',\r\n\t\t\t\t\tcancelText: 'ÂèñÊ∂à',\r\n\t\t\t\t\tconfirmColor: '#FF4757',\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tif (post.id && !post.id.startsWith('local_')) {\r\n\t\t\t\t\t\t\t\t\t// ‰ªéÊï∞ÊçÆÂ∫ìÂà†Èô§\r\n\t\t\t\t\t\t\t\t\tawait conversationService.supabaseService.deleteTreeholePost(post.id)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// ‰ªéÊú¨Âú∞Â≠òÂÇ®Âà†Èô§\r\n\t\t\t\t\t\t\t\t\tlet localPosts = uni.getStorageSync('treehole_posts') || []\r\n\t\t\t\t\t\t\t\t\tlocalPosts = localPosts.filter(p => p.id !== post.id)\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('treehole_posts', localPosts)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// ‰ªéÂΩìÂâçÂàóË°®‰∏≠ÁßªÈô§\r\n\t\t\t\t\t\t\t\tthis.posts.splice(index, 1)\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tconsole.error('Âà†Èô§Â∏ñÂ≠êÂ§±Ë¥•:', error)\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'Âà†Èô§Â§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonPageScroll(e) {\r\n\t\t\t// ÊòæÁ§∫/ÈöêËóèÂõûÂà∞È°∂ÈÉ®ÊåâÈíÆ\r\n\t\t\tthis.showBackToTop = e.scrollTop > 500\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n.hole-page {\r\n\tmin-height: 100vh;\r\n\tbackground: linear-gradient(135deg, #E6F3FF 0%, #F0F8FF 50%, #E6F3FF 100%);\r\n\tpadding: 0;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tposition: relative;\r\n}\r\n\r\n/* Â§¥ÈÉ®Ê†∑Âºè‰ºòÂåñ - Ê∑°ËìùËâ≤‰∏ªÈ¢ò */\r\n.header {\r\n\tbackground: linear-gradient(135deg, #B0D8FF 0%, #87CEEB 50%, #B0D8FF 100%);\r\n\tpadding: 40rpx 30rpx 30rpx;\r\n\tbox-shadow: 0 4rpx 20rpx rgba(176, 216, 255, 0.4);\r\n\tposition: sticky;\r\n\ttop: 0;\r\n\tz-index: 100;\r\n}\r\n\r\n.header-content {\r\n\ttext-align: center;\r\n}\r\n\r\n.title {\r\n\tdisplay: block;\r\n\tfont-size: 52rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #fff;\r\n\tmargin-bottom: 12rpx;\r\n\ttext-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.subtitle {\r\n\tdisplay: block;\r\n\tfont-size: 26rpx;\r\n\tcolor: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n/* Âõ∫ÂÆöÂ∫ïÈÉ®ÂèëÂ∏ÉÂå∫Âüü - Ê∑°ËìùËâ≤‰∏ªÈ¢ò */\r\n.fixed-publish-section {\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbackground: #fff;\r\n\tborder-top: 2rpx solid #E6F3FF;\r\n\tbox-shadow: 0 -4rpx 20rpx rgba(176, 216, 255, 0.2);\r\n\tz-index: 999;\r\n\ttransition: all 0.3s ease;\r\n\t/* ÂÆâÂÖ®Âå∫ÂüüÈÄÇÈÖç */\r\n\tpadding-bottom: calc(20rpx + env(safe-area-inset-bottom));\r\n\tmax-height: 80vh;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n\r\n.fixed-publish-section.collapsed {\r\n\tmax-height: 100rpx;\r\n\toverflow: hidden;\r\n}\r\n\r\n.fixed-publish-section.expanded {\r\n\tmax-height: 80vh;\r\n}\r\n\r\n.publish-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 20rpx;\r\n\tcursor: pointer;\r\n\tbackground: linear-gradient(135deg, #F8FBFF 0%, #E6F3FF 100%);\r\n\tborder-bottom: 2rpx solid #E6F3FF;\r\n\ttransition: all 0.3s;\r\n\tflex-shrink: 0;\r\n}\r\n\r\n.publish-header:active {\r\n\tbackground: linear-gradient(135deg, #E6F3FF 0%, #D0E8FF 100%);\r\n}\r\n\r\n.publish-title {\r\n\tfont-size: 28rpx;\r\n\tfont-weight: 600;\r\n\tcolor: #4A90E2;\r\n}\r\n\r\n.publish-toggle {\r\n\tfont-size: 24rpx;\r\n\tcolor: #87CEEB;\r\n\tfont-weight: 500;\r\n\ttransition: transform 0.3s;\r\n}\r\n\r\n.publish-content {\r\n\tpadding: 20rpx;\r\n\toverflow-y: auto;\r\n\tanimation: slideUp 0.3s ease-out;\r\n\tmax-height: calc(80vh - 100rpx);\r\n\tflex: 1;\r\n}\r\n\r\n@keyframes slideUp {\r\n\tfrom {\r\n\t\topacity: 0;\r\n\t\ttransform: translateY(20rpx);\r\n\t}\r\n\tto {\r\n\t\topacity: 1;\r\n\t\ttransform: translateY(0);\r\n\t}\r\n}\r\n\r\n.input-area {\r\n\tmargin-bottom: 25rpx;\r\n}\r\n\r\n.textarea {\r\n\twidth: 100%;\r\n\tmin-height: 220rpx;\r\n\tbackground: #F5F9FF;\r\n\tborder: 2rpx solid #E6F3FF;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 24rpx;\r\n\tfont-size: 28rpx;\r\n\tbox-sizing: border-box;\r\n\tline-height: 1.8;\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.textarea:focus {\r\n\tborder-color: #B0D8FF;\r\n\tbackground: #fff;\r\n\tbox-shadow: 0 0 0 6rpx rgba(176, 216, 255, 0.2);\r\n}\r\n\r\n.input-footer {\r\n\tdisplay: flex;\r\n\tjustify-content: flex-end;\r\n\tmargin-top: 12rpx;\r\n}\r\n\r\n.word-count {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n\ttransition: color 0.3s;\r\n}\r\n\r\n.word-count.warning {\r\n\tcolor: #FF6B6B;\r\n\tfont-weight: bold;\r\n}\r\n\r\n/* ÊÉÖÁª™Ê†áÁ≠æÂå∫Âüü‰ºòÂåñ */\r\n.emotion-section {\r\n\tmargin-bottom: 25rpx;\r\n}\r\n\r\n.emotion-label {\r\n\tdisplay: block;\r\n\tfont-size: 26rpx;\r\n\tcolor: #666;\r\n\tmargin-bottom: 15rpx;\r\n}\r\n\r\n.emotion-tags {\r\n\twhite-space: nowrap;\r\n\tdisplay: flex;\r\n\tgap: 12rpx;\r\n}\r\n\r\n.emotion-tag {\r\n\tdisplay: inline-flex;\r\n\talign-items: center;\r\n\tgap: 6rpx;\r\n\tpadding: 12rpx 18rpx;\r\n\tbackground: #F5F9FF;\r\n\tborder: 2rpx solid #E6F3FF;\r\n\tborder-radius: 24rpx;\r\n\tfont-size: 24rpx;\r\n\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n\tflex-shrink: 0;\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n}\r\n\r\n.emotion-tag::before {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: -100%;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);\r\n\ttransition: left 0.5s;\r\n}\r\n\r\n.emotion-tag:active::before {\r\n\tleft: 100%;\r\n}\r\n\r\n.emotion-tag.active {\r\n\tbackground: linear-gradient(135deg, #E6F3FF 0%, #B0D8FF 100%);\r\n\tborder-color: #87CEEB;\r\n\ttransform: scale(1.05);\r\n\tbox-shadow: 0 4rpx 12rpx rgba(176, 216, 255, 0.4);\r\n}\r\n\r\n.emotion-icon {\r\n\tfont-size: 28rpx;\r\n\ttransition: transform 0.3s;\r\n}\r\n\r\n.emotion-tag.active .emotion-icon {\r\n\ttransform: scale(1.2);\r\n}\r\n\r\n.emotion-text {\r\n\tcolor: #666;\r\n\tfont-weight: 500;\r\n\ttransition: color 0.3s;\r\n}\r\n\r\n.emotion-tag.active .emotion-text {\r\n\tcolor: #4A90E2;\r\n\tfont-weight: bold;\r\n}\r\n\r\n/* ÊåâÈíÆ‰ºòÂåñ - Ê∑°ËìùËâ≤‰∏ªÈ¢ò */\r\n.actions {\r\n\tdisplay: flex;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.btn {\r\n\tflex: 1;\r\n\theight: 88rpx;\r\n\tborder-radius: 44rpx;\r\n\tfont-size: 30rpx;\r\n\tfont-weight: 600;\r\n\tborder: none;\r\n\ttransition: all 0.3s;\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n}\r\n\r\n.btn::after {\r\n\tborder: none;\r\n}\r\n\r\n.btn-primary {\r\n\tbackground: linear-gradient(135deg, #B0D8FF 0%, #87CEEB 100%);\r\n\tcolor: #fff;\r\n\tbox-shadow: 0 6rpx 20rpx rgba(176, 216, 255, 0.4);\r\n}\r\n\r\n.btn-primary:active {\r\n\ttransform: scale(0.98);\r\n\tbox-shadow: 0 4rpx 12rpx rgba(176, 216, 255, 0.5);\r\n}\r\n\r\n.btn-primary:disabled {\r\n\tbackground: #ccc;\r\n\topacity: 0.6;\r\n\tbox-shadow: none;\r\n}\r\n\r\n.btn-secondary {\r\n\tbackground: #F5F9FF;\r\n\tcolor: #4A90E2;\r\n\tborder: 2rpx solid #E6F3FF;\r\n}\r\n\r\n.btn-secondary:active {\r\n\tbackground: #E6F3FF;\r\n\ttransform: scale(0.98);\r\n\tborder-color: #B0D8FF;\r\n}\r\n\r\n.btn-secondary:disabled {\r\n\topacity: 0.5;\r\n\tbackground: #F5F5F5;\r\n\tcolor: #999;\r\n}\r\n\r\n/* Â∏ñÂ≠êÂàóË°®ÂÆπÂô® */\r\n.posts-container {\r\n\tflex: 1;\r\n\theight: 0;\r\n\tpadding: 0 20rpx 120rpx; /* Â∫ïÈÉ®ÁïôÂá∫Á©∫Èó¥ÁªôÂõ∫ÂÆöÂèëÂ∏ÉÂå∫Âüü */\r\n}\r\n\r\n.posts {\r\n\tpadding-bottom: 20rpx;\r\n}\r\n\r\n/* Á©∫Áä∂ÊÄÅ‰ºòÂåñ - Ê∑°ËìùËâ≤‰∏ªÈ¢ò */\r\n.empty-state {\r\n\ttext-align: center;\r\n\tpadding: 120rpx 40rpx;\r\n\tbackground: #fff;\r\n\tborder-radius: 24rpx;\r\n\tmargin: 20rpx 0;\r\n\tbox-shadow: 0 4rpx 20rpx rgba(176, 216, 255, 0.2);\r\n\tborder: 2rpx solid rgba(176, 216, 255, 0.3);\r\n}\r\n\r\n.empty-icon-wrapper {\r\n\tmargin-bottom: 30rpx;\r\n\tanimation: float 3s ease-in-out infinite;\r\n}\r\n\r\n@keyframes float {\r\n\t0%, 100% {\r\n\t\ttransform: translateY(0);\r\n\t}\r\n\t50% {\r\n\t\ttransform: translateY(-20rpx);\r\n\t}\r\n}\r\n\r\n.empty-icon {\r\n\tdisplay: block;\r\n\tfont-size: 120rpx;\r\n\tmargin: 0 auto;\r\n}\r\n\r\n.empty-text {\r\n\tdisplay: block;\r\n\tfont-size: 34rpx;\r\n\tcolor: #333;\r\n\tmargin-bottom: 12rpx;\r\n\tfont-weight: 600;\r\n}\r\n\r\n.empty-desc {\r\n\tdisplay: block;\r\n\tfont-size: 26rpx;\r\n\tcolor: #999;\r\n\tmargin-bottom: 40rpx;\r\n\tline-height: 1.6;\r\n}\r\n\r\n.empty-action-btn {\r\n\tbackground: linear-gradient(135deg, #B0D8FF 0%, #87CEEB 100%);\r\n\tcolor: white;\r\n\tborder-radius: 44rpx;\r\n\tpadding: 20rpx 60rpx;\r\n\tfont-size: 28rpx;\r\n\tborder: none;\r\n\tbox-shadow: 0 6rpx 20rpx rgba(176, 216, 255, 0.4);\r\n}\r\n\r\n/* Â∏ñÂ≠êÈ°π‰ºòÂåñ - Ê∑°ËìùËâ≤‰∏ªÈ¢ò */\r\n.post-item {\r\n\tbackground: #fff;\r\n\tborder-radius: 24rpx;\r\n\tpadding: 32rpx;\r\n\tmargin-bottom: 24rpx;\r\n\tbox-shadow: 0 6rpx 25rpx rgba(176, 216, 255, 0.2);\r\n\tborder: 2rpx solid rgba(176, 216, 255, 0.3);\r\n\tanimation: slideInUp 0.5s ease-out both;\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.post-item:active {\r\n\ttransform: scale(0.99);\r\n}\r\n\r\n@keyframes slideInUp {\r\n\tfrom {\r\n\t\topacity: 0;\r\n\t\ttransform: translateY(30rpx);\r\n\t}\r\n\tto {\r\n\t\topacity: 1;\r\n\t\ttransform: translateY(0);\r\n\t}\r\n}\r\n\r\n.post-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: flex-start;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.post-header-right {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 15rpx;\r\n}\r\n\r\n.post-author {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 15rpx;\r\n\tflex: 1;\r\n}\r\n\r\n.author-avatar {\r\n\twidth: 64rpx;\r\n\theight: 64rpx;\r\n\tborder-radius: 50%;\r\n\tbackground: linear-gradient(135deg, #E6F3FF 0%, #B0D8FF 100%);\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbox-shadow: 0 2rpx 8rpx rgba(176, 216, 255, 0.3);\r\n}\r\n\r\n.avatar-icon {\r\n\tfont-size: 36rpx;\r\n}\r\n\r\n.author-info {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 4rpx;\r\n}\r\n\r\n.author-name {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n\tfont-weight: 600;\r\n}\r\n\r\n.post-time-header {\r\n\tfont-size: 22rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.post-emotion {\r\n\tmargin-left: 0;\r\n}\r\n\r\n/* Âà†Èô§ÊåâÈíÆ */\r\n.delete-btn {\r\n\twidth: 60rpx;\r\n\theight: 60rpx;\r\n\tborder-radius: 50%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbackground: rgba(255, 107, 107, 0.1);\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.delete-btn:active {\r\n\ttransform: scale(0.9);\r\n\tbackground: rgba(255, 107, 107, 0.2);\r\n}\r\n\r\n.delete-icon {\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.emotion-badge {\r\n\tfont-size: 22rpx;\r\n\tcolor: #4A90E2;\r\n\tbackground: linear-gradient(135deg, #E6F3FF 0%, #B0D8FF 100%);\r\n\tpadding: 6rpx 14rpx;\r\n\tborder-radius: 16rpx;\r\n\tfont-weight: 500;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.post-content {\r\n\tfont-size: 30rpx;\r\n\tcolor: #333;\r\n\tline-height: 1.9;\r\n\tmargin-bottom: 24rpx;\r\n\tword-wrap: break-word;\r\n\tword-break: break-all;\r\n\twhite-space: pre-wrap;\r\n}\r\n\r\n.post-footer {\r\n\tpadding-top: 20rpx;\r\n\tborder-top: 2rpx solid #F0F0F0;\r\n}\r\n\r\n.post-actions {\r\n\tdisplay: flex;\r\n\tgap: 40rpx;\r\n\tjustify-content: flex-end;\r\n}\r\n\r\n.action-item {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 10rpx;\r\n\tfont-size: 26rpx;\r\n\tcolor: #666;\r\n\tpadding: 8rpx 16rpx;\r\n\tborder-radius: 20rpx;\r\n\ttransition: all 0.3s;\r\n\tposition: relative;\r\n}\r\n\r\n.action-item:active {\r\n\tbackground: #F8F9FA;\r\n\ttransform: scale(0.95);\r\n}\r\n\r\n.action-item.liked {\r\n\tcolor: #FF6B6B;\r\n}\r\n\r\n.action-item.liked .action-icon {\r\n\tfilter: grayscale(0);\r\n\tanimation: heartBeat 0.5s ease;\r\n}\r\n\r\n.action-item:not(.liked) .action-icon {\r\n\tfilter: grayscale(100%);\r\n\topacity: 0.7;\r\n}\r\n\r\n.action-item.comment-action.active {\r\n\tcolor: #4A90E2;\r\n\tbackground: #E6F3FF;\r\n}\r\n\r\n@keyframes heartBeat {\r\n\t0%, 100% {\r\n\t\ttransform: scale(1);\r\n\t}\r\n\t25% {\r\n\t\ttransform: scale(1.3);\r\n\t}\r\n\t50% {\r\n\t\ttransform: scale(1.1);\r\n\t}\r\n\t75% {\r\n\t\ttransform: scale(1.2);\r\n\t}\r\n}\r\n\r\n.action-icon {\r\n\tfont-size: 32rpx;\r\n\ttransition: transform 0.3s;\r\n}\r\n\r\n.action-item:active .action-icon {\r\n\ttransform: scale(1.2);\r\n}\r\n\r\n.action-count {\r\n\tfont-size: 24rpx;\r\n\tfont-weight: 500;\r\n\tmin-width: 30rpx;\r\n\ttext-align: center;\r\n}\r\n\r\n/* ËØÑËÆ∫Âå∫Âüü‰ºòÂåñ - Êõ¥Á™ÅÂá∫Ôºå‰ª•ËØÑËÆ∫‰∏∫‰∏ª */\r\n.comments-section {\r\n\tmargin-top: 28rpx;\r\n\tpadding-top: 28rpx;\r\n\tborder-top: 3rpx solid #E6F3FF;\r\n\tbackground: #F8FBFF;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 24rpx;\r\n\tmargin-left: -32rpx;\r\n\tmargin-right: -32rpx;\r\n\tmargin-bottom: -32rpx;\r\n\tanimation: slideDown 0.3s ease-out;\r\n}\r\n\r\n.comments-section.expanded {\r\n\tbackground: #F8FBFF;\r\n}\r\n\r\n@keyframes slideDown {\r\n\tfrom {\r\n\t\topacity: 0;\r\n\t\tmax-height: 0;\r\n\t\ttransform: translateY(-10rpx);\r\n\t}\r\n\tto {\r\n\t\topacity: 1;\r\n\t\tmax-height: 2000rpx;\r\n\t\ttransform: translateY(0);\r\n\t}\r\n}\r\n\r\n.comments-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 24rpx;\r\n\tpadding-bottom: 16rpx;\r\n\tborder-bottom: 2rpx solid #E6F3FF;\r\n\tcursor: pointer;\r\n}\r\n\r\n.comments-title {\r\n\tfont-size: 30rpx;\r\n\tcolor: #4A90E2;\r\n\tfont-weight: 700;\r\n}\r\n\r\n.comments-toggle {\r\n\tfont-size: 24rpx;\r\n\tcolor: #87CEEB;\r\n\tfont-weight: 500;\r\n}\r\n\r\n.comments-list {\r\n\tmargin-bottom: 24rpx;\r\n\tmax-height: 800rpx;\r\n\toverflow-y: auto;\r\n}\r\n\r\n.comment-item {\r\n\tdisplay: flex;\r\n\tgap: 16rpx;\r\n\tbackground: #fff;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 20rpx;\r\n\tmargin-bottom: 16rpx;\r\n\tborder: 2rpx solid #E6F3FF;\r\n\tbox-shadow: 0 2rpx 8rpx rgba(176, 216, 255, 0.15);\r\n\tanimation: fadeIn 0.3s ease-out;\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.comment-item:active {\r\n\ttransform: scale(0.98);\r\n\tbox-shadow: 0 1rpx 4rpx rgba(176, 216, 255, 0.2);\r\n}\r\n\r\n@keyframes fadeIn {\r\n\tfrom {\r\n\t\topacity: 0;\r\n\t\ttransform: translateY(-10rpx);\r\n\t}\r\n\tto {\r\n\t\topacity: 1;\r\n\t\ttransform: translateY(0);\r\n\t}\r\n}\r\n\r\n.comment-avatar {\r\n\twidth: 64rpx;\r\n\theight: 64rpx;\r\n\tborder-radius: 50%;\r\n\tbackground: linear-gradient(135deg, #E6F3FF 0%, #B0D8FF 100%);\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tflex-shrink: 0;\r\n}\r\n\r\n.comment-avatar-icon {\r\n\tfont-size: 32rpx;\r\n}\r\n\r\n.comment-body {\r\n\tflex: 1;\r\n\tmin-width: 0;\r\n}\r\n\r\n.comment-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 12rpx;\r\n}\r\n\r\n.comment-author {\r\n\tfont-size: 26rpx;\r\n\tcolor: #4A90E2;\r\n\tfont-weight: 600;\r\n}\r\n\r\n.comment-time {\r\n\tfont-size: 22rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.comment-content {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n\tline-height: 1.8;\r\n\tword-wrap: break-word;\r\n\twhite-space: pre-wrap;\r\n}\r\n\r\n.no-comments {\r\n\ttext-align: center;\r\n\tpadding: 40rpx 20rpx;\r\n}\r\n\r\n.no-comments-text {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.comment-input-area {\r\n\tdisplay: flex;\r\n\tgap: 12rpx;\r\n\talign-items: center;\r\n\tbackground: #fff;\r\n\tborder: 2rpx solid #E6F3FF;\r\n\tborder-radius: 32rpx;\r\n\tpadding: 8rpx 8rpx 8rpx 20rpx;\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.comment-input-area:focus-within {\r\n\tborder-color: #B0D8FF;\r\n\tbox-shadow: 0 0 0 4rpx rgba(176, 216, 255, 0.15);\r\n}\r\n\r\n.comment-input {\r\n\tflex: 1;\r\n\theight: 64rpx;\r\n\tbackground: transparent;\r\n\tborder: none;\r\n\tfont-size: 26rpx;\r\n\tcolor: #333;\r\n}\r\n\r\n.comment-input::placeholder {\r\n\tcolor: #999;\r\n}\r\n\r\n.comment-submit-btn {\r\n\theight: 64rpx;\r\n\tpadding: 0 32rpx;\r\n\tbackground: linear-gradient(135deg, #B0D8FF 0%, #87CEEB 100%);\r\n\tcolor: white;\r\n\tborder-radius: 32rpx;\r\n\tfont-size: 26rpx;\r\n\tfont-weight: 600;\r\n\tborder: none;\r\n\tbox-shadow: 0 4rpx 12rpx rgba(176, 216, 255, 0.4);\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.comment-submit-btn:active {\r\n\ttransform: scale(0.95);\r\n\tbox-shadow: 0 2rpx 8rpx rgba(176, 216, 255, 0.5);\r\n}\r\n\r\n.comment-submit-btn:disabled {\r\n\tbackground: #ccc;\r\n\topacity: 0.6;\r\n\tbox-shadow: none;\r\n}\r\n\r\n/* Âä†ËΩΩÁä∂ÊÄÅ‰ºòÂåñ */\r\n.load-more {\r\n\ttext-align: center;\r\n\tpadding: 40rpx 20rpx;\r\n}\r\n\r\n.load-more-content {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tgap: 10rpx;\r\n}\r\n\r\n.load-more-icon {\r\n\tfont-size: 24rpx;\r\n\tanimation: bounce 1s infinite;\r\n}\r\n\r\n@keyframes bounce {\r\n\t0%, 100% {\r\n\t\ttransform: translateY(0);\r\n\t}\r\n\t50% {\r\n\t\ttransform: translateY(-10rpx);\r\n\t}\r\n}\r\n\r\n.load-more-text {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.loading {\r\n\ttext-align: center;\r\n\tpadding: 40rpx 20rpx;\r\n}\r\n\r\n.loading-spinner {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tgap: 8rpx;\r\n\tmargin-bottom: 15rpx;\r\n}\r\n\r\n.spinner-dot {\r\n\tfont-size: 40rpx;\r\n\tcolor: #87CEEB;\r\n\tanimation: dotPulse 1.4s infinite ease-in-out both;\r\n}\r\n\r\n.spinner-dot:nth-child(1) {\r\n\tanimation-delay: -0.32s;\r\n}\r\n\r\n.spinner-dot:nth-child(2) {\r\n\tanimation-delay: -0.16s;\r\n}\r\n\r\n@keyframes dotPulse {\r\n\t0%, 80%, 100% {\r\n\t\ttransform: scale(0.6);\r\n\t\topacity: 0.5;\r\n\t}\r\n\t40% {\r\n\t\ttransform: scale(1.2);\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n\r\n.loading-text {\r\n\tdisplay: block;\r\n\tfont-size: 26rpx;\r\n\tcolor: #999;\r\n}\r\n\r\n.no-more {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tgap: 20rpx;\r\n\tpadding: 40rpx 20rpx;\r\n}\r\n\r\n.no-more-line {\r\n\tflex: 1;\r\n\theight: 2rpx;\r\n\tbackground: linear-gradient(90deg, transparent, #E0E0E0, transparent);\r\n}\r\n\r\n.no-more-text {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999;\r\n\twhite-space: nowrap;\r\n}\r\n\r\n/* ÂõûÂà∞È°∂ÈÉ®ÊåâÈíÆ - Ê∑°ËìùËâ≤‰∏ªÈ¢ò */\r\n.back-to-top {\r\n\tposition: fixed;\r\n\tright: 30rpx;\r\n\tbottom: 120rpx;\r\n\twidth: 80rpx;\r\n\theight: 80rpx;\r\n\tbackground: linear-gradient(135deg, #B0D8FF 0%, #87CEEB 100%);\r\n\tborder-radius: 50%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tbox-shadow: 0 8rpx 25rpx rgba(176, 216, 255, 0.5);\r\n\tz-index: 999;\r\n\tanimation: fadeInUp 0.3s ease-out;\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.back-to-top:active {\r\n\ttransform: scale(0.9);\r\n}\r\n\r\n@keyframes fadeInUp {\r\n\tfrom {\r\n\t\topacity: 0;\r\n\t\ttransform: translateY(20rpx);\r\n\t}\r\n\tto {\r\n\t\topacity: 1;\r\n\t\ttransform: translateY(0);\r\n\t}\r\n}\r\n\r\n.back-to-top-icon {\r\n\tfont-size: 36rpx;\r\n\tcolor: white;\r\n\tfont-weight: bold;\r\n}\r\n\r\n/* ÂìçÂ∫îÂºè‰ºòÂåñ */\r\n@media (max-width: 750rpx) {\r\n\t.publish-section {\r\n\t\tmargin: 15rpx;\r\n\t\tpadding: 25rpx;\r\n\t}\r\n\t\r\n\t.post-item {\r\n\t\tpadding: 28rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.emotion-tags {\r\n\t\tgap: 10rpx;\r\n\t}\r\n\t\r\n\t.emotion-tag {\r\n\t\tpadding: 10rpx 16rpx;\r\n\t\tfont-size: 22rpx;\r\n\t}\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/workspace/PBL2/HeartHarbor/pages/hole/hole.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","conversationService"],"mappings":"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"}