<view class="ai-page data-v-fdb58938"><view class="top-bar data-v-fdb58938"><view class="virtual-human-btn data-v-fdb58938" bindtap="{{a}}"><text class="virtual-icon data-v-fdb58938">🎭</text><text class="virtual-text data-v-fdb58938">虚拟人</text></view><view class="current-settings data-v-fdb58938"><text class="settings-text data-v-fdb58938">当前：{{b}}</text></view><view class="conversation-actions data-v-fdb58938"><view class="new-conversation-btn data-v-fdb58938" bindtap="{{c}}"><text class="action-icon data-v-fdb58938">+</text><text class="action-text data-v-fdb58938">新对话</text></view><view class="history-btn data-v-fdb58938" bindtap="{{d}}"><text class="action-icon data-v-fdb58938">📚</text><text class="action-text data-v-fdb58938">历史记录</text></view></view></view><view class="role-section data-v-fdb58938"><text class="section-title data-v-fdb58938">选择AI角色</text><scroll-view class="role-list data-v-fdb58938" scroll-x="true" show-scrollbar="false" enable-flex><view wx:for="{{e}}" wx:for-item="role" wx:key="d" class="{{['role-item', 'data-v-fdb58938', role.e && 'active']}}" bindtap="{{role.f}}"><text class="role-icon data-v-fdb58938">{{role.a}}</text><text class="role-name data-v-fdb58938">{{role.b}}</text><text class="role-desc data-v-fdb58938">{{role.c}}</text></view></scroll-view></view><view class="chat-container data-v-fdb58938"><scroll-view class="message-list data-v-fdb58938" scroll-y="true" scroll-top="{{i}}" enable-flex><view wx:for="{{f}}" wx:for-item="msg" wx:key="d" class="{{['message-item', 'data-v-fdb58938', msg.e && 'user-message', msg.f && 'ai-message']}}"><view class="avatar data-v-fdb58938"><text wx:if="{{msg.a}}" class="data-v-fdb58938">👤</text><text wx:else class="data-v-fdb58938">{{msg.b}}</text></view><view class="content data-v-fdb58938"><text class="data-v-fdb58938">{{msg.c}}</text></view></view><view wx:if="{{g}}" class="message-item ai-message data-v-fdb58938"><view class="avatar data-v-fdb58938"><text class="data-v-fdb58938">{{h}}</text></view><view class="content data-v-fdb58938"><view class="loading-dots data-v-fdb58938"><text class="dot data-v-fdb58938">.</text><text class="dot data-v-fdb58938">.</text><text class="dot data-v-fdb58938">.</text></view></view></view></scroll-view><view class="input-area data-v-fdb58938"><input class="input data-v-fdb58938" placeholder="和AI伙伴聊聊..." bindconfirm="{{j}}" value="{{k}}" bindinput="{{l}}"/><button class="send-btn data-v-fdb58938" bindtap="{{m}}">发送</button></view></view><view wx:if="{{n}}" class="modal data-v-fdb58938"><view class="modal-content data-v-fdb58938"><view class="modal-header data-v-fdb58938"><text class="modal-title data-v-fdb58938">虚拟人功能</text><text class="modal-close data-v-fdb58938" bindtap="{{o}}">×</text></view><view class="modal-body data-v-fdb58938"><text class="modal-text data-v-fdb58938">虚拟人功能已就绪！</text><text class="modal-text data-v-fdb58938">现在您可以与虚拟形象进行生动的对话交流。</text><view class="feature-preview data-v-fdb58938"><text class="feature-item data-v-fdb58938">🎯 讯飞智能虚拟人</text><text class="feature-item data-v-fdb58938">💬 自然语音交互</text><text class="feature-item data-v-fdb58938">🎨 叶子语音陪伴</text></view></view></view></view><view class="{{['history-panel', 'data-v-fdb58938', v && 'active']}}"><view class="history-header data-v-fdb58938"><text class="history-title data-v-fdb58938">对话历史</text><view class="history-stats data-v-fdb58938"><text class="stat-item data-v-fdb58938">总计: {{p}}</text><text class="stat-item data-v-fdb58938">最近: {{q}}</text></view><text class="history-close data-v-fdb58938" bindtap="{{r}}">×</text></view><scroll-view class="history-list data-v-fdb58938" scroll-y="true"><view wx:for="{{s}}" wx:for-item="conversation" wx:key="f" class="{{['history-item', 'data-v-fdb58938', conversation.g && 'active']}}" bindtap="{{conversation.h}}"><view class="conversation-info data-v-fdb58938"><text class="conversation-title data-v-fdb58938">{{conversation.a}}</text><text class="conversation-meta data-v-fdb58938">{{conversation.b}} · {{conversation.c}}</text></view><view class="conversation-actions data-v-fdb58938"><text class="action-btn delete-btn data-v-fdb58938" catchtap="{{conversation.d}}">🗑️</text><text class="action-btn edit-btn data-v-fdb58938" catchtap="{{conversation.e}}">✏️</text></view></view><view wx:if="{{t}}" class="empty-state data-v-fdb58938"><text class="empty-icon data-v-fdb58938">📝</text><text class="empty-text data-v-fdb58938">还没有对话记录</text><text class="empty-hint data-v-fdb58938">开始新的对话吧！</text></view></scroll-view></view><view wx:if="{{w}}" class="overlay data-v-fdb58938" bindtap="{{x}}"></view><view wx:if="{{y}}" class="modal data-v-fdb58938"><view class="modal-content data-v-fdb58938"><view class="modal-header data-v-fdb58938"><text class="modal-title data-v-fdb58938">编辑对话标题</text><text class="modal-close data-v-fdb58938" bindtap="{{z}}">×</text></view><view class="modal-body data-v-fdb58938"><input class="title-input data-v-fdb58938" placeholder="请输入对话标题" value="{{A}}" bindinput="{{B}}"/><view class="modal-actions data-v-fdb58938"><button class="btn-cancel data-v-fdb58938" bindtap="{{C}}">取消</button><button class="btn-confirm data-v-fdb58938" bindtap="{{D}}">确定</button></view></view></view></view></view>